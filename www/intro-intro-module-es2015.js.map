{"version":3,"sources":["./src/app/intro/intro.page.html","./src/app/intro/intro-routing.module.ts","./src/app/intro/intro.module.ts","./src/app/intro/intro.page.scss","./src/app/intro/intro.page.ts"],"names":[],"mappings":"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","file":"intro-intro-module-es2015.js","sourcesContent":["export default \"<app-page-loader *ngIf=\\\"isLogged == false\\\"></app-page-loader>\\r\\n<div class=\\\"wrapper\\\" id=\\\"app\\\">\\r\\n  <div class=\\\"intro-box\\\"><img class=\\\"intro-box__bg\\\" src=\\\"assets/img/intro.png\\\"/>\\r\\n    <div class=\\\"intro-box__inside\\\">\\r\\n      <div class=\\\"intro-box__data\\\"><img src=\\\"assets/img/logo-white.png\\\"/>\\r\\n        <p>أخبار الرياضة وكرة القدم السعودية والعالمية من مصادر حصرية تنشر أول بأول</p>\\r\\n      </div>\\r\\n      <div class=\\\"intro-box__action\\\">\\r\\n        <a routerLink=\\\"/register\\\" class=\\\"btn btn--block btn--primary\\\">إنشاء حساب جديد</a>\\r\\n        <a routerLink=\\\"/login\\\" class=\\\"btn btn--block btn--secondary\\\">تسجيل دخول</a>\\r\\n        <a routerLink=\\\"/home\\\" class=\\\"btn\\\">إستمرار بدون دخول</a></div>\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\";","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IntroPage } from './intro.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: IntroPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class IntroPageRoutingModule {}\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { IntroPageRoutingModule } from './intro-routing.module';\r\n\r\nimport { IntroPage } from './intro.page';\r\nimport { SharedComponentsModule } from '../shared/shared.components';\r\n\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    IntroPageRoutingModule,\r\n    SharedComponentsModule\r\n  ],\r\n  declarations: [IntroPage]\r\n})\r\nexport class IntroPageModule {}\r\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2ludHJvL2ludHJvLnBhZ2Uuc2NzcyJ9 */\";","import { Component, OnInit } from '@angular/core';\nimport { UserService } from '../user.service';\n\nimport { FCM } from 'cordova-plugin-fcm-with-dependecy-updated/ionic/ngx'\nimport { ActivatedRoute, Router, NavigationExtras } from '@angular/router';\nimport { Platform } from '@ionic/angular';\nimport { AppService } from '../services/app.service';\n\n\n\n\n@Component({\n    selector: 'app-intro',\n    templateUrl: './intro.page.html',\n    styleUrls: ['./intro.page.scss'],\n})\nexport class IntroPage implements OnInit {\n\n    isLogged = false\n\n    plugin_state = false\n    notification_count = 0\n\n    public hasPermission: boolean;\n    public token: string;\n    _device_id\n    _subscribe: any\n\n    constructor(private _UserService: UserService, private fcm: FCM,\n        private _ActivatedRoute: ActivatedRoute, private _platform: Platform, private _Router: Router, private _AppService: AppService) {\n\n    }\n\n\n\n    getToken() {\n        this.fcm.getToken().then(function (token) {\n            if (token) {\n                localStorage.setItem(\"fcm_token\", token);\n            }\n        })\n            .catch(function (error) {\n            });\n    }\n\n    async setupFCM() {\n        //  alert('2')\n        // if (!this.plugin_state) {\n\n        await this._platform.ready();\n        if (!this._platform.is('cordova')) {\n            return;\n        }\n\n        await this.fcm.subscribeToTopic('arriyadiyah');\n\n        this._device_id = this._UserService.get_device_id()\n        localStorage.setItem('device_id', this._device_id)\n        // alert('3'+this._device_id)\n        this.getToken()\n        this.fcm.onTokenRefresh().subscribe((newToken) => {\n            if (newToken) {\n                localStorage.setItem(\"fcm_token\", newToken);\n                this._AppService.user_post_data(`user/update`, {\n                    \"device_id\": this._UserService.get_device_id(),\n                    \"device_type\": this._AppService.get_platform(),\n                    \"token\": newToken\n                }, 's', localStorage.getItem('token'))\n                    .subscribe((res => {\n\n                    }))\n                // this.updateToken(newToken, this._device_id);\n\n            }\n        });\n\n\n\n\n\n        this.fcm.onNotification().subscribe((payload) => {\n            if (payload.wasTapped) {\n                // let navigationExtras: NavigationExtras = { state: { data: payload } };\n                // this._Router.navigate(['single-notification'], navigationExtras);\n            }\n            else {\n                // if (localStorage.getItem('notification_count')) {\n                //   localStorage.setItem('notification_count', localStorage.getItem('notification_count') + '1')\n                // } else {\n                //   localStorage.setItem('notification_count', '1')\n                // }\n            }\n\n\n\n            this.fcm.clearAllNotifications()\n\n            this.fcm.unsubscribeFromTopic('arriyadiyah');\n            // this.plugin_state = true\n        })\n\n\n\n        // }\n\n    }\n\n\n\n\n\n    is_user_logged_routing() {\n        if (localStorage.getItem('token') != null) {\n            if (this._Router.url == '/login' || this._Router.url == '/register' || this._Router.url == '/intro') {\n                // this.isLogged = true\n                this._AppService.router_navigation('/home')\n            }\n        } else {\n            this.isLogged = true\n            // this._AppService.router_navigation('/intro')\n        }\n    }\n\n\n\n\n    ngOnInit() {\n        // alert('ss')\n\n        // alert('1')\n        this.setupFCM()\n        this.is_user_logged_routing()\n        // this._UserService.is_user_logged_routing()\n        // this._ActivatedRoute.params.subscribe(val => {\n\n        //   this._platform.ready().then(() => {\n        //     .then(function () {\n        //       // console.log('ss')\n        //     })\n        //       .catch(function (error) {\n        //       });\n\n\n        //   });\n        // })\n    }\n\n}\n"],"sourceRoot":"webpack:///"}